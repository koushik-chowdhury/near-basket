<!DOCTYPE html>
<html lang="en">
  <head>
    <!--  Basic Meta Tags -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Near Basket | Smart Grocery Price List & Online Ordering</title>

    <!--  Primary SEO Meta -->
    <meta name="description" content="Compare grocery prices, view discounts, and order directly via WhatsApp â€” all from Near Basket, your smart neighborhood grocery app." />
    <meta name="keywords" content="grocery, near basket, grocery price list, detergent, supermarket app, online grocery, nearbasket.store, kirana app" />
    <meta name="author" content="Near Basket Team" />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#27ae60" />

    <!--  Google Analytics (GA4) -->
    <!-- Tracks user visits and interactions -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NHFN4Y7HYB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-NHFN4Y7HYB");
    </script>

    <!--  Styles -->
    <link rel="stylesheet" href="style.css" />

    <!-- Icons (Remix Icon CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet" />

    <!--  PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!--  Favicon -->
    <link rel="icon" href="./logo/logo-192.png" type="image/png" />
  </head>
  <body>
    <main>
      <!-- <nav>
        <ul>
          <li>
            <a href=""><i class="ri-home-4-line"></i></a>
          </li>
          <li>
            <a href=""><i class="ri-apps-line"></i></a>
          </li>
          <li>
            <a href=""><i class="ri-shopping-cart-2-line"></i></a>
          </li>
        </ul>
      </nav> -->
      <div class="container">
        <img src="logo/logo.png" class="logo" height="80px" />
        <header class="nb-header">
          <h1>Near Basket</h1>
          <p>Smart Grocery Price List</p>
          <div class="search">
            <i class="ri-search-line search-icon"></i>
            <input type="text" name="" id="searchBox" placeholder="Search Product" />
          </div>
        </header>
        <div class="price-list">
          <!-- PRODUCT WILL ADD HERE DYNAMICALLY -->
        </div>
      </div>
    </main>

    <script type="module" src="script.js"></script>

    <!-- Register Service Worker -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("service-worker.js")
            .then(() => console.log("âœ… Service Worker Registered"))
            .catch((err) => console.log("SW fail:", err));
        });
      }

      // Install popup prompt
      let deferredPrompt;
      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;

        // create custom popup
        const installDiv = document.createElement("div");
        installDiv.innerHTML = `
      <div id="installPopup" style="
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: #27ae60;
        color: white;
        padding: 12px 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        font-family: Poppins, sans-serif;
        cursor: pointer;
        z-index: 9999;">
        ðŸ“± Install Near Basket
      </div>`;
        document.body.appendChild(installDiv);

        installDiv.addEventListener("click", async () => {
          installDiv.remove();
          deferredPrompt.prompt();
          const choice = await deferredPrompt.userChoice;
          if (choice.outcome === "accepted") {
            console.log("App installed");
          }
          deferredPrompt = null;
        });
      });
    </script>
  </body>
</html>
