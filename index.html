<!DOCTYPE html>
<html lang="en">
  <head>
    <!--  Basic Meta Tags -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Near Basket | Smart Grocery Price List & Online Ordering</title>

    <!--  Primary SEO Meta -->
    <meta name="description" content="Compare grocery prices, view discounts, and order directly via WhatsApp — all from Near Basket, your smart neighborhood grocery app." />
    <meta name="keywords" content="grocery, near basket, grocery price list, detergent, supermarket app, online grocery, nearbasket.store, kirana app" />
    <meta name="author" content="Near Basket Team" />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#27ae60" />

    <!--  Google Analytics (GA4) -->
    <!-- Tracks user visits and interactions -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NHFN4Y7HYB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-NHFN4Y7HYB");
    </script>

    <!--  Styles -->
    <link rel="stylesheet" href="style.css" />

    <!-- Icons (Remix Icon CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet" />

    <!--  PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!--  Favicon -->
    <link rel="icon" href="./logo/logo-192.png" type="image/png" />
  </head>
  <body>
    <main>
      <!-- <nav>
        <ul>
          <li>
            <a href=""><i class="ri-home-4-line"></i></a>
          </li>
          <li>
            <a href=""><i class="ri-apps-line"></i></a>
          </li>
          <li>
            <a href=""><i class="ri-shopping-cart-2-line"></i></a>
          </li>
        </ul>
      </nav> -->
      <div class="container">
        <img src="logo/logo.png" class="logo" height="80px" />
        <header class="nb-header">
          <h1>Near Basket</h1>
          <p>Smart Grocery Price List</p>
          <div class="search">
            <i class="ri-search-line search-icon"></i>
            <input type="text" name="" id="searchBox" placeholder="Search Product" />
          </div>
        </header>
        <div class="price-list">
          <!-- PRODUCT WILL ADD HERE DYNAMICALLY -->
        </div>
      </div>
      <div class="order-wp">
        <a href="https://wa.me/919242979349?text=Hello%20Near%20Basket%2C%20I%20want%20to%20place%20an%20order." target="_blank">
          <button class="whatsapp-btn">
            <i class="ri-whatsapp-line"></i>
            <p>Place Order</p>
          </button>
        </a>
      </div>
    </main>

    <script type="module" src="script.js"></script>

    <!-- Register Service Worker -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("service-worker.js")
            .then(() => console.log("✅ Service Worker Registered"))
            .catch((err) => console.log("SW fail:", err));
        });
      }

      // Install popup prompt
      let deferredPrompt;

      window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;

        if (document.getElementById("installPopup")) return;

        const installDiv = document.createElement("div");
        installDiv.id = "installPopup";
        installDiv.innerHTML = `
    <div style="
      position: absolute;
      top: 12px;
      right:8px;
      background: #333;
      font-weight:bold;
      color: white;
      padding: 8px 14px;
      border-radius: 4px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      font-family: Poppins, sans-serif;
      cursor: pointer;
      z-index: 9999;
      font-size: 12px;">
      <i class="ri-arrow-down-circle-line"></i> Install
    </div>`;
        document.body.appendChild(installDiv);

        installDiv.addEventListener("click", async () => {
          installDiv.remove();
          deferredPrompt.prompt();
          const choice = await deferredPrompt.userChoice;
          if (choice.outcome === "accepted") {
            console.log("✅ User accepted the install prompt");
          } else {
            console.log("❌ User dismissed the install prompt");
          }
          deferredPrompt = null;
        });
      });

      // Remove popup after installation
      window.addEventListener("appinstalled", () => {
        console.log("✅ App installed successfully");
        const popup = document.getElementById("installPopup");
        if (popup) popup.remove();
      });
    </script>
  </body>
</html>
